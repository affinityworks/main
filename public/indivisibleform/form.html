<html>
	<!-- 3 -->
	<head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="/indivisibleform/style/header.css" />
	    <link rel="stylesheet" type="text/css" href="/indivisibleform/style/form.css" />
	    <link rel="stylesheet" type="text/css" href="/indivisibleform/style/body.css" />
        <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <!-- link href="http://pingendo.github.io/pingendo-bootstrap/themes/default/bootstrap.css" rel="stylesheet" type="text/css"  -->
        <link href="/indivisibleform/style/whitelabel.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="/indivisibleform/style/parsley.css" />

        <!-- end CSS -->

        <!-- JS -->

        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
        <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script
		  		src="https://code.jquery.com/jquery-3.1.1.min.js"
			  	integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
				crossorigin="anonymous">
		</script>
		<script src="/indivisibleform/js/parsley.js" type="text/javascript"></script>
		<script src="/indivisibleform/js/jquery.osdi.js" type="text/javascript"></script>
		<script src="/indivisibleform/js/formfixer.js" type="text/javascript"></script>

		<script type="text/javascript">
				$(document).ready(function() {
				$('testform').osdi();
				});
		</script>

				<!-- end JS -->

    </head>
    <body>

	<!-- begin copied from AN -->

	<div id="form-container">
            <!-- script src="https://actionnetwork.org/widgets/v2/form/indivisible-group-signup?format=js&amp;source=widget&amp;style=full&amp;clear_id=true"></script -->
      <div id="can-form-area-indivisible-group-signup" style="width: 500px">
	      <div class="can_embed v2  form form_full full">
  		    	<div id="can_embed_form" class="clearfix can_float">
                  <div class="clearfix">

                      <div id="can_main_col">

                          <h2 class="entry-title js-entry-title">
                              Indivisible Group Signup
                          </h2>

                          <div id="action_info">
                            <div id="action_info_inner" class="clearfix">


                              <div class="action_owner_box">
                                <div class="action_owner_title action_sponsor_title"><h5>Sponsored by</h5></div>
                                <div class="action_owner_wrap action_sponsor_wrap">
                                  <div class="action_owner clearfix">
                                    <a href="https://actionnetwork.org/groups/advocacy-commons" target="_blank">
                                      <img alt="Protest_bw" class="action_author_avatar avatar" src="https://can2-prod.s3.amazonaws.com/groups/photos/000/028/013/thumb/protest_bw.png">
                                    </a>
                                    <div class="action_info_right">
                                      <div class="action_info_user js-action_info_user">
                                          <a href="https://actionnetwork.org/groups/advocacy-commons" target="_blank">Advocacy Commons</a>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                            </div>
                          </div>

                      </div> <!-- end can_main_col -->

                          <div id="can_sidebar">


                                  <div class="action_sidebar">


                                      <h4> Form Heading </h4>
                                      <form id="new_answer" data-parsley-validate action="/" class="new_answer"  method="post" accept-charset="UTF-8" >
                                          <div style="margin:0;padding:0;display:inline">
                                          </div>

                                          <input
                                              id="first"
                                              name="first"
                                              placeholder="First Name"
                                              size="35"
                                              background-repeat: no-repeat;
                                              background-attachment: scroll;
                                              background-size: 16px 18px;
                                              background-position: 98% 50%;
                                              type="text">

                                          <input id="last" name="last" placeholder="Last Name" size="35" type="text">

                                          <input id="email" name="email" placeholder="Email *" size="35" value="" type="email" data-parsley-trigger="change" required="" >

                                          <input id="postal_code" name="postal_code" placeholder="Zip/Postal Code *" size="35" type="text" data-parsley-type="digits" data-parsley-minlength="5" data-parsley-maxlength="5" data-parsley-trigger="change">

                                          <div class="form_builder_output">
                                          <!-- Text input-->
                                              <li class="control-group">
                                                <label class="control-label" for="GroupName"></label>
                                                <input id="GroupName" name="GroupName" placeholder="Group Name *"  type="text">
                                              </li>

                                              <!-- Text input-->
                                              <li class="control-group">
                                                <label class="control-label" for="GroupEmail"></label>
                                                <input id="GroupEmail" name="GroupEmail" placeholder="Group Email address" type="email" data-parsley-trigger="change" required="" data-parsley-group="block1">
                                              </li>

                                              <!-- Text input-->
                                              <li class="control-group">
                                                <label class="control-label" for="GroupFBpage"></label>
                                                <input id="GroupFBpage" name="GroupFBpage" placeholder="Link to Facebook Page" class="input-xlarge " type="text" data-parsley-trigger="change" data-parsley-type="url" data-parsley-group="block1">
                                              </li>

                                              <!-- Text input-->
                                              <li class="control-group">
                                                <label class="control-label" for="GroupTwitter"></label>
                                                <input id="GroupTwitter" name="GroupTwitter" placeholder="Link to Twitter Page" class="input-xlarge " type="text" data-parsley-trigger="change" data-parsley-type="url" data-parsley-group="block1">
                                              </li>

                                              <!-- Text input-->
                                              <li class="control-group">
                                                <label class="control-label" for="GroupWebsite"></label>
                                                <input id="GroupWebsite" name="GroupWebsite" placeholder="Website link" class="input-xlarge " type="text" data-parsley-trigger="change" data-parsley-type="url" data-parsley-group="block1">
                                              </li>

                                              <!-- Text input-->
                                              <li class="control-group">
                                                <label class="control-label" for="GroupPhoneNumber"></label>
                                                <input id="GroupPhoneNumber" name="GroupPhoneNumber" placeholder="Group phone number"  type="text" data-parsley-group="block1">
                                              </li>

                                              <!-- Form Name -->

                                          </div>  <!-- end form_builder_output -->

                                          <ul>

                                              <li>
                                                <input class="" name="commit" value="Add Your Name" type="submit">

                                              </li>

                                          </ul>



                                          <div class="clear"></div>
                                      </form>

                                  </div> <!-- end action_sidebar -->
                          </div> <!-- end can_sidebar -->
                  </div> <!-- end clearfix -->
       		 	</div> <!-- end can_embed_form -->
	      </div> <!-- end can_embed -->
	  </div> <!-- end can-form-area-indivisible-group-signup -->


      <input id="btnHide" value="Next..." type="submit">


	</div> <!-- end form-container -->

	<script type="text/javascript">
	$(document).ready(function() {
		$('#new_answer').osdi({
			endpoint: "https://actionnetwork.org/api/v2/forms/56104ef6-4197-44ae-bdce-2a9289e80ea7/submissions",
			body: function() {
				return {
					"person": {
						"given_name": $('#first').val(),
						"family_name": $('#last').val(),
						"postal_code": $('#postal_code').val(),
						"email_addresses": [
							{
								"address": $('#email').val()
							}
						],

						"custom_fields": {
							"GroupName": $('#GroupName').val(),
							"GroupEmail": $('#GroupEmail').val(),
							"GroupPhoneNumber": $('#GroupPhoneNumber').val(),
							"GroupFBpage": $('#GroupFBpage').val(),
							"GroupTwitter": $('#GroupTwitter').val(),
							"GroupWebsite": $('#GroupWebsite').val(),
							"GroupPhoneNumber": $('#GroupPhoneNumber').val()
  					},
					},
				}
			},
			done: function(data, textStatus, jqXHR) {
				console.log('done');
				window.location.replace("https://actionnetwork.org/forms/register-local-group?clear_id=true");
				$('#success').html('<p><strong>It worked!</strong></p>');
			},
			fail: function(jqXHR, textStatus, errorThrown) {
				console.log('fail');
				$('#success').html('<p><strong>It failed!</strong></p>');
			},
			always: function(data_jqXHR, textStatus, jqXHR_errorThrown) {
				console.log('always');
			}
		});
	});
	</script>

	<script type="text/javascript">
	$(function () {
	  $('#new_answer').parsley().on('field:validated', function() {
	    var ok = $('.parsley-error').length === 0;
	    $('.bs-callout-info').toggleClass('hidden', !ok);
	    $('.bs-callout-warning').toggleClass('hidden', ok);
	  })
	//  .on('form:submit', function() {
	//    return false; // Don't submit form for this demo
	//  });
	});
	</script>


<script type="text/javascript">
$(function () {
  $('#new_answer').parsley().on('form:validate', function (formInstance) {
    var ok = formInstance.isValid({group: 'block1', force: true}) || formInstance.isValid({group: 'block2', force: true});
    $('.invalid-form-error-message')
      .html(ok ? '' : 'You must correctly fill *at least one of these two blocks!')
      .toggleClass('filled', !ok);
    if (!ok)
      formInstance.validationResult = false;
  });
});
</script>

</html>
